# Code Supplement to "NL4Py: Agent-Based Modeling in Python with Parallelizable NetLogo Workspaces"

This supplement contains the code used to generate results for "NL4Py: Agent-Based Modeling in Python with Parallelizable NetLogo Workspaces"

## Requirements

The experiments in the article have been conducted on a Windows 64 Bit, Intel Core i7 machine with 32 GB of memory. Windows 64 Bit is recommended for the replication of the experiments due to restrictions with running PyNetLogo with IPyParallel in experiment 5.3. The other experiments in the article can be reproduced on MacOS or Linux.


The general requirements to run NL4Py are:
* System must have NetLogo 6 or higher installed. https://ccl.northwestern.edu/netlogo/download.shtml
* System must have JDK 8 or higher installed and set path to java bin included in environment variables. JDK 1.8 is recommended http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html
* System must have Python 2.7 or higher or Python 3.6 or higher installed (Python 3 recommended). Recommend using Anaconda to setup Python, as Experiment 5.3 requires IPython, and Jupyter notebook (packaged and installed with Anaconda) a requirement of parallelizing PyNetLogo, a platform used to benchmark NL4Py. Anaconda will also install common Python packages (Numpy, Pandas, and Matplotlib) that are used in the experiments. https://repo.anaconda.com/archive/Anaconda3-5.2.0-Windows-x86_64.exe


NL4Py has been tested with NetLogo 6.

###Additional Requirements for Experiment 5.3

To run experiment 5.3, PyNetLogo requires Jupyter notebook and IPyParallel:
* Please install Anaconda 1.8.7. Jupyter notebook will be installed with Anaconda. and Jupyter notebook ( tested with version 5.5.0). Jupyter notebook is opened through the Anaconda navigator and can be used with either version of Python above.

Finally, please use pip as follows to install the following packages:

```
>pip install nl4py
>pip install deap
>pip install salib
>pip install jpype1
>pip install pynetlogo
>pip install ipyparallel
```
## Instructions

To start the experiments, please use the following command to start the master script:

```python
>python RunAll.py "path_to_netlogo"
```

You will be prompted to enter which experiment you want to run. Please enter one of the following options:
*0: Run all experiments (Full Replication)
*1: For experiment 3.1, Parameter Calibration with NL4Py and DEAP
*2: For experiment 3.2, Sensitvity Analysis with NL4Py and SALib
*3: For experiment 5.1, Thread execution time comparisons using NL4Py
*4: For experiment 5.2, Execution time comparisons between NL4Py and PyNetLogo on three different models
*5: For experiment 5.3, Execution time comparison between NL4Py and PyNetLogo with IPCluster

Due to the many replicate runs of simulations and large sample sizes and generations during sensitivity analysis and calibration, full replication of the entire experiment set takes around 48 hours to complete. Therefore, it is recommended to use the master script (RunAlly.py) to run each experimentone at a time.

### Folder structure

*RunAll.py: master script. Please run this file as specified above to initiate replication of results.
*output: Please find all results generated by RunAll.py in this folder.
*models: Contains sample NetLogo models used in the experiments presented in the article.
*Section 3: Contains sensitivity analysis and calibration experiments in Section 3 of the article.
*Section 5: Contains execution time experiments from Section 5 of the article.

### Section 3

In Section 3 we describe two applications of NL4Py important for statistical analysis of agent-based model output, sensitivity analysis and parameter calibration. We perform these methods on the Wolf Sheep Predation model, from the sample models collection in the NetLogo examples library. 

#### Sensitivity Analysis

Sensitivity analysis of the wolf sheep predation model using SALib.

#### Parameter Calibration

Calibraiton of the wolf sheep predation model towards equilibrium using DEAP.

### Section 5

In Section 5 of the article we present results for execution time comparisons of NL4Py under different thread configurations and results for execution time comparisons between NL4Py, PyNetLogo, and PyNetLogo in combination with IPyParallel (as demonstrated by [Jaxa-Rozen & Kwakkel, 2018](http://jasss.soc.surrey.ac.uk/21/2/4.html)).

#### Thread Count Comparison

Runs the Wolf Sheep Predation model via NL4Py under varying thread counts, comparing execution times.

#### NL4Py vs PyNetLogo Execution Time Comparison

Performs NL4Py vs PyNetLogo simple reporter execution time comparisons on the Fire, Ethnocentrism, and Wolf Sheep Predation models.

#### NL4Py vs PyNetLogo on IPyParallel Cluster Execution Time Comparison

Here we compare the execution time of NL4Py's scheduled reporters against the PyNetLogo equivalent, repeat_reporter. This code is split across two Jupyter Notebooks. 